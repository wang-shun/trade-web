<?xml version="1.0" encoding="UTF-8"?><querys>
	<dicts>
		<customDict id="qqcdMortName" beanName="qqcdMortName"></customDict>
		<customDict id="qqPropertyAddr" beanName="qqPropertyAddr"></customDict>
		<customDict id="qqFinOrgNameYC" beanName="qqFinOrgNameYC"></customDict>
		<customDict id="qqFenHang" beanName="qqFenHang"></customDict>
		<customDict id="qqcdOrgIdName" beanName="qqcdOrgIdName"></customDict>
		<customDict id="qqFenHang" beanName="qqFenHang"></customDict>
		<customDict id="qqRealName" beanName="qqRealName"></customDict>
		<customDict id="qqIsLost" beanName="qqIsLost"></customDict>
	
		<customDict id="qqSignPrice" beanName="qqSignPrice"></customDict>
		<customDict id="qqEvalFee" beanName="qqEvalFee"></customDict>
		<customDict id="qqCaseProperty" beanName="qqCaseProperty"></customDict>
		<customDict id="qqMortgageAmount" beanName="qqMortgageAmount"></customDict>
		<customDict id="qqcdMortServName" beanName="qqcdMortServName"></customDict>


	</dicts>

	<formatters>
		
		<formatter id="dateFormatter" ref="" class="com.aist.common.quickQuery.formatter.DateFormatter" />
		<formatter id="numberFormater" ref="" class="com.aist.common.quickQuery.formatter.NumberFormatter">
			<properties>
				<property name="groupingUsed">true</property>
				<property name="maximumFractionDigits">3</property>
				<property name="maximumIntegerDigits">40</property>
				<property name="minimumFractionDigits">0</property>
				<property name="minimumIntegerDigits">1</property>
			</properties>
		</formatter>
		<formatter id="integerFormater" ref="" class="com.aist.common.quickQuery.formatter.NumberFormatter">
			<properties>
				<property name="maximumFractionDigits">0</property>
			</properties>
		</formatter>
	</formatters>
	
	<query id="findToMortgage4Par">
	    <searchCondition>      
        </searchCondition> 
		<searchSql>
			<baseSql>
				<![CDATA[  	
					SELECT 
							t.ID_ AS taskId,
							t.PROC_INST_ID_ AS procInstanceId,
							m.loan_agent as consultantID,
							m.cust_name as custName,
							ISNULL(m.STATE_IN_BANK,'') AS statusCode,
							m.MORT_TOTAL_AMOUNT as loanAmount,
							CAST(m.COM_YEAR as varchar)+'å¹´' as loanTime,
							m.SIGN_DATE as applyTime,
							'MORT' as prdType,
							m.case_code as caseCode,
							CAST(m.PKID as varchar)	as bizCode,
							p.PROPERTY_ADDR 	as addr,
							uoj.employee_code 	as avartaUrl,
							uoj.real_name 		as consultantName
				FROM sctrans.ACT_RU_TASK t
				INNER JOIN sctrans.T_TO_WORKFLOW w ON t.PROC_INST_ID_  = w.INST_CODE
				INNER JOIN sctrans.T_TO_MORTGAGE m ON m.CASE_CODE = w.CASE_CODE
				INNER JOIN sctrans.T_TO_PROPERTY_INFO p ON p.CASE_CODE = w.CASE_CODE AND m.LOANER_ID = #userid# AND	m.is_active = '1'
				INNER JOIN sctrans.V_USER_ORG_JOB uoj ON m.loan_agent = uoj.user_id AND uoj.ismain = 1 AND uoj.JOB_CODE = 'consultant'
				WHERE t.ASSIGNEE_ = (SELECT USERNAME FROM sctrans.SYS_USER WHERE ID = #userid#) AND t.SUSPENSION_STATE_ = '1'
				AND EXISTS (select 1 from sctrans.T_TO_CASE c where c.CASE_CODE = m.CASE_CODE and c.LOAN_REQ=1)
				<ifNotNull q_text>
					 AND (m.cust_name LIKE '%'+#q_text#+'%'
					     			OR pi.property_addr	LIKE '%'+#q_text#+'%'
					     			OR uoj.real_name LIKE '%'+#q_text#+'%')
				</ifNotNull>		
				]]>
			</baseSql>
			<groupSql>
			</groupSql>
			<orderBySql>
			  ORDER BY m.SIGN_DATE DESC
			</orderBySql>
		</searchSql>
		<grid>
			<table-row>
				<column type="both" name="taskId" index="" />
				<column type="both" name="procInstanceId" index="" />
				<column type="both" name="avartaUrl" index="" />
				<column type="both" name="consultantName" index="" />
				<column type="both" name="consultantID" index="" />
				<column type="both" name="custName" index="" />
				<column type="both" name="loanAmount" index="" />
				<column type="both" name="loanTime" index="" />
				<column type="both" name="addr" index="" />
				<column type="both" name="applyTime" index=""  beanFormatter="dateFormatter" expFmt="yyyy/MM/dd" expType="date" />
				<column type="both" name="prdType" index="" />
				<column type="both" name="caseCode" index="" />
				<column type="both" name="bizCode" index="" />
				<column type="both" name="statusCode" display="mortInfo_statusCode"  />
				<column type="virtual" name="status"  referencecol="statusCode" customDict="qqcdMortServName" />
			</table-row>
		</grid>
	</query>
</querys>