<?xml version="1.0" encoding="UTF-8"?>
<querys>
	<dicts>
		<customDict id="qqcdMortServName" beanName="qqcdMortServName"></customDict>
		<customDict id="qqcdFinOrgNameDict" beanName="qqcdFinOrgNameDict"></customDict>
		<customDict id="qqRealName" beanName="qqRealName"></customDict>
		<customDict id="qqcdCaseStatus" beanName="qqcdCaseStatus"></customDict>
	</dicts>
 
	<formatters>
		<formatter id="dateFormatter" ref=""
			class="com.aist.common.quickQuery.formatter.DateFormatter">
			<properties>
				<property name="pattern">yyyy-MM-dd</property>
			</properties>
		</formatter>
		<formatter id="dateFormatter1" ref=""
			class="com.aist.common.quickQuery.formatter.DateFormatter" />
		<formatter id="numberFormater" ref=""
			class="com.aist.common.quickQuery.formatter.NumberFormatter">
			<properties>
				<property name="groupingUsed">true</property>
				<property name="maximumFractionDigits">3</property>
				<property name="maximumIntegerDigits">40</property>
				<property name="minimumFractionDigits">0</property>
				<property name="minimumIntegerDigits">1</property>
			</properties>
		</formatter>
		<formatter id="integerFormater" ref=""
			class="com.aist.common.quickQuery.formatter.NumberFormatter">
			<properties>
				<property name="maximumFractionDigits">0</property>
			</properties>
		</formatter>
	</formatters>
	
	<query id="queryELoanTradeProcess">
		<searchCondition>
		</searchCondition>
		<searchSql>
			<baseSql>
				<![CDATA[  	
			    	SELECT 
							(SELECT NAME FROM sctrans.SYS_DICT WHERE CODE = tpqv.PART_CODE AND IS_DELETED = 0 AND AVAILABLE = 1 AND TYPE = 'part_code') AS status,
							CONVERT(varchar(100), tpqv.REAL_TIME, 23) AS createTime,
							u.REAL_NAME as createBy,
							ISNULL(tpqv.COMMENT,'') AS comment
					FROM sctrans.V_TRADE_PROCESS_QUERY_VIEW tpqv
					INNER JOIN sctrans.SYS_USER u ON u.ID = tpqv.CREATE_BY
					WHERE tpqv.CASE_CODE = #caseCode#
					ORDER BY tpqv.REAL_TIME DESC
				]]>
			</baseSql>
			<groupSql>
			</groupSql>
			<orderBySql>
			</orderBySql>
		</searchSql>
		<grid>
			<table-row>
				<column type="both" name="status" title="案件环节状态"  sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>		
				<column type="both" name="createTime" title="创建时间"  sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>			
				<column type="both" name="createBy" title="创建人" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>		
				<column type="both" name="comment" title="跟进内容"  sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>			
			</table-row>
		</grid>
	</query>
	

	<query id="queryTradeProcess">
		<searchCondition>
		</searchCondition>
		<searchSql>
			<baseSql>
				<![CDATA[  	
			    SELECT 
                    VTP.CASE_CODE,
      				VTP.PART_CODE AS SRV_CODE,
      				VTP.REAL_TIME,
      				ISNULL(VTP.CREATE_BY,'') AS CREATE_BY,
      				ISNULL(VTP.COMMENT,'') AS COMMENT
				    FROM sctrans.V_TRADE_PROCESS_QUERY_VIEW AS VTP
        			
        			WHERE VTP.CASE_CODE = #bizCode#
			    	
			    	ORDER BY VTP.REAL_TIME DESC
				]]>
			</baseSql>
			<groupSql>
			</groupSql>
			<orderBySql>
			</orderBySql>
		</searchSql>
		<grid>
			<table-row>
			<column type="both" name="SRV_CODE" />
			<column type="virtual" name="SRV_NAME" referencecol="SRV_CODE" customDict="qqcdMortServName"  />
			<column type="both" name="REAL_TIME" display="createTime" beanFormatter="dateFormatter" expType="date" expFmt="yyyy-MM-dd" />
			<column type="both" name="CREATE_BY" display="createBy" />
			<column type="virtual" name="REAL_NAME" display="yuOperator_name" referencecol="CREATE_BY" customDict="qqRealName"  />
			<column type="both" name="COMMENT" display="comments" />
			</table-row>
		</grid>
	</query>
</querys>