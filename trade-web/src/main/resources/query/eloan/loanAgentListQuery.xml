<?xml version="1.0" encoding="UTF-8"?>
<querys>
<dicts>
        <customDict id="getUserNameByUserId" beanName="qqcdUserIdName"></customDict>
        <customDict id="getParentOrgNameByOrgId" beanName="qqcdYuCuiOrgName"></customDict>
        <customDict id="qqcdDictServCode" beanName="qqcdDictServCode"></customDict>
</dicts>
<formatters>
		<formatter id="dateFormatter" ref="" class="com.aist.common.quickQuery.formatter.DateFormatter">
			<properties>
				<property name="pattern">yyyy-MM-dd </property>
			</properties>
		</formatter>
		<formatter id="dateFormatter1" ref="" class="com.aist.common.quickQuery.formatter.DateFormatter"/>
		
		<formatter id="numberFormater" ref="" class="com.aist.common.quickQuery.formatter.NumberFormatter">
			<properties>
				<property name="groupingUsed">true</property>
				<property name="maximumFractionDigits">3</property>
				<property name="maximumIntegerDigits">40</property>
				<property name="minimumFractionDigits">0</property>
				<property name="minimumIntegerDigits">1</property>
			</properties>
		</formatter>
		<formatter id="integerFormater" ref="" class="com.aist.common.quickQuery.formatter.NumberFormatter">
			<properties>
				<property name="maximumFractionDigits">0</property>
			</properties>
		</formatter>
		<formatter id="emailFormater" ref="" class="com.aist.common.quickQuery.formatter.EmailFormatter"/>
	</formatters>
	<query id="loanAgentListQuery">
		<searchCondition>
			<condition field="loanAgent.CASE_CODE" name="caseCode" label="案件编号" searchType="EQ" showType="" showCallback="" defaultValue=""/>
            <condition field="INFO.PROPERTY_ADDR" name="propertyAddr" label="物业地址" searchType="LIKE" showType="" showCallback="" defaultValue=""/>
            <condition field="userOrg.REAL_NAME" name="realName" label="人员" searchType="LIKE" showType="" showCallback="" defaultValue=""/>
            <condition field="orgHierarchy.DISTRICT_ID" name="districtOrgId" label="所属区域" searchType="IN" showType="" showCallback="" defaultValue=""/>
            <condition field="loanAgent.LOAN_SRV_CODE" name="loanSrvCode" label="税费卡" searchType="EQ" showType="" showCallback="" defaultValue=""/>
            <condition field="loanAgent.APPLY_TIME" name="applyTimeStart" label="申请开始时间" searchType="GTE" showType="" showCallback="" defaultValue=""/>
            <condition field="loanAgent.APPLY_TIME" name="applyTimeEnd" label="申请结束时间" searchType="LTE" showType="" showCallback="" defaultValue=""/>
            <condition field="loanAgent.SIGN_TIME" name="signTimeStart" label="面签开始时间" searchType="GTE" showType="" showCallback="" defaultValue=""/>
            <condition field="loanAgent.SIGN_TIME" name="signTimeEnd" label="面签结束时间" searchType="LTE" showType="" showCallback="" defaultValue=""/>
            <condition field="loanAgent.RELEASE_TIME" name="releaseTimeStart" label="放款开始时间" searchType="GTE" showType="" showCallback="" defaultValue=""/>
            <condition field="loanAgent.RELEASE_TIME" name="releaseTimeEnd" label="放款结束时间" searchType="LTE" showType="" showCallback="" defaultValue=""/>
          </searchCondition>
		<searchSql>
			<baseSql>
				<![CDATA[
					SELECT 
					  c.PKID,
					  loanAgent.CASE_CODE,
					  INFO.PROPERTY_ADDR,
					  loanAgent.LOAN_SRV_CODE,
					  loanAgent.EXECUTOR_ID,
					  userOrg.ORG_id as 'PARENT_ORG_NAME',
					  sign.CON_PRICE/10000 as 'CON_PRICE',
					  loanAgent.APPLY_TIME,
					  loanAgent.SIGN_TIME,
					  loanAgent.RELEASE_TIME,
					  loanAgent.LOAN_AMOUNT/10000 as 'LOAN_AMOUNT',
					  loanAgent.SIGN_AMOUNT/10000 as 'SIGN_AMOUNT',
					  loanAgent.ACTUAL_AMOUNT/10000 as 'ACTUAL_AMOUNT' 
					FROM 
					   sctrans.T_TO_LOAN_AGENT loanAgent
					INNER JOIN sctrans.T_TO_CASE c ON c.CASE_CODE = loanAgent.CASE_CODE
					INNER JOIN sctrans.T_TO_SIGN sign ON loanAgent.CASE_CODE = sign.CASE_CODE
					INNER JOIN (SELECT * FROM sctrans.T_TO_PROPERTY_INFO ) INFO ON INFO.CASE_CODE = loanAgent.CASE_CODE
					INNER JOIN 
					    SCTRANS.V_USER_ORG_JOB userOrg
					ON  
					    loanAgent.EXECUTOR_ID = userOrg.user_id
					INNER JOIN
				        sctrans.v_yucui_org_hierarchy orgHierarchy
				    ON
				        orgHierarchy.ORG_ID = userOrg.ORG_id
				    WHERE 
				    loanAgent.CASE_CODE is not null and loanAgent.CASE_CODE <>''
				    <ifNotNull yuCuiOriGrpId>
						and (orgHierarchy.TEAM_ID=#yuCuiOriGrpId# or orgHierarchy.DISTRICT_ID=#yuCuiOriGrpId# or orgHierarchy.hq_id=#yuCuiOriGrpId#)
					</ifNotNull>
				]]>
			</baseSql>
			<orderBySql>
			  	ORDER BY loanAgent.CASE_CODE DESC
			</orderBySql>
			<groupSql>
			</groupSql>
		</searchSql>
		<grid>
			<table-row>
			    <column type="both" name="PKID" index="" checkbox="" display="主键" customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable="" hide="true"/>
				<column type="both" name="CASE_CODE" index="" checkbox="" display="案件编号" title="案件编号" customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>
				<column type="both" name="PROPERTY_ADDR" index="" checkbox="" display="产证地址" title="产证地址" customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>
				<column type="both" name="LOAN_SRV_CODE" index="" checkbox="" display="产品名称" title="产品名称" customDict="qqcdDictServCode" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>
				<column type="both" name="EXECUTOR_ID" index="" checkbox="" display="执行人" title="执行人" customDict="getUserNameByUserId" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>
				<column type="both" name="PARENT_ORG_NAME" index="" checkbox="" display="所属服务部" title="所属服务部" customDict="getParentOrgNameByOrgId" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>
				<column type="both" name="CON_PRICE" index="" checkbox="" display="合同价" title="合同价" customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>
				<column type="both" name="APPLY_TIME" index="" checkbox="" display="申请时间" title="申请时间" customDict="" sysDict="" format="" beanFormatter="dateFormatter" width="90" isSort="" align="" halign="" order="" resizable=""/>
				<column type="both" name="SIGN_TIME" index="" checkbox="" display="面签时间" title="面签时间" customDict="" sysDict="" format="" beanFormatter="dateFormatter" width="90" isSort="" align="" halign="" order="" resizable="" />
				<column type="both" name="RELEASE_TIME" index="" checkbox="" display="放款时间" title="放款时间" customDict="" sysDict="" format="" beanFormatter="dateFormatter" width="90" isSort="" align="" halign="" order="" resizable=""/>
				<column type="both" name="LOAN_AMOUNT" index="" checkbox="" display="申请金额" title="申请金额" customDict="" sysDict="" format="" beanFormatter="" width= "90" align="" halign="" resizable=""/>
				<column type="both" name="SIGN_AMOUNT" index="" checkbox="" display="面签金额" title="面签金额" customDict="" sysDict="" format="" width="90" align="" halign="" order="" resizable=""/>
				<column type="both" name="ACTUAL_AMOUNT" index="" checkbox="" display="放款金额" title="放款金额" customDict="" sysDict="" format="" width="90" align="" halign="" order="" resizable=""/>
			</table-row>
		</grid>
	</query>
</querys>