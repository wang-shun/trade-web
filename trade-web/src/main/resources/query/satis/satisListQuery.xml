<?xml version="1.0" encoding="UTF-8"?>
<querys>
	<dicts>
		<customDict id="qqManagerInfo" beanName="qqManagerInfo" />
		<customDict id="qqcdOrgIdName" beanName="qqcdOrgIdName" />
		<customDict id="qqcdUserIdName" beanName="qqcdUserIdName" />
	</dicts>
	<formatters>
		<formatter id="dateFormatter" ref="" class="com.aist.common.quickQuery.formatter.DateFormatter">
			<properties>
				<property name="pattern">yyyy-MM-dd</property>
			</properties>
		</formatter>
	</formatters>
	<query  id="SatisListQuery">
	    <searchCondition>
	    	<condition field="s.CASE_CODE" name="caseCode" label="案件编码" searchType="EQ" showType="" showCallback="" defaultValue=""/>
            <condition field="p.PROPERTY_ADDR" name="prAddress" label="物业地址" searchType="LIKE" showType="" showCallback="" defaultValue=""/>
		    <condition field="s.CALLER_ID" name="callerId" label="客服" searchType="EQ" showType="" showCallback="" defaultValue=""/>
            <condition field="s.STATUS" name="status" label="回访状态" searchType="EQ" showType="" showCallback="" defaultValue=""/>
        </searchCondition>
		<searchSql>
			<baseSql>
				<![CDATA[
			       select 
			       		s.PKID,
			       		a.PKID CASE_ID,
			       		s.STATUS,
						s.CASE_CODE,
						a.CTM_CODE,
						p.PROPERTY_ADDR PR_ADDR,
						SYSUSER.ORG_ID,
						a.GRP_NAME AS AGENT_ORG_NAME,
						a.AGENT_NAME,
						a.agent_phone as MOBILE,
						s.SIGN_TIME,
						s.GUOHU_TIME,
						s.CLOSE_TIME,
						s.CALLER_ID,
						c.ORG_ID C_ORG_ID,
						a.WZ_NAME
					from 
						sctrans.T_CS_CASE_SATISFACTION s
					LEFT JOIN sctrans.T_TO_PROPERTY_INFO p on s.CASE_CODE = p.CASE_CODE
					LEFT JOIN sctrans.T_TO_CASE_INFO AS a ON s.CASE_CODE=a.CASE_CODE
					LEFT JOIN SCTRANS.SYS_USER SYSUSER ON SYSUSER.ID = A.AGENT_CODE
					LEFT JOIN sctrans.T_TO_CASE c on c.case_code=s.case_code
					LEFT JOIN sctrans.sys_org org ON s.CALLER_ID=org.ID
					WHERE 1=1
                    <if test="serviceJobCode == 'JYUKFZY' ">
			           and s.CALLER_ID = #sessionUserId#
			        </if>
				]]>
			</baseSql>
			<orderBySql>
			  ORDER BY s.STATUS ASC
			</orderBySql>
		</searchSql>
		<grid>
			<table-row>
				<column type="both" name="PKID" index="" checkbox="" display="PKID" customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable="" hide="true"/>
				<column type="both" name="CASE_ID" index="" checkbox="" display="CASE_ID" customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable="" hide="true"/>
				<column type="both" name="STATUS" index="" checkbox="" display="STATUS" customDict="" sysDict="" format="" width="180" isSort="true" align="" halign="" order="" resizable=""/>
				<column type="both" name="CASE_CODE" index="" checkbox="" display="CASECODE" customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable="" hide="true"/>
				<column type="both" name="CTM_CODE" index="" checkbox="" display="CTM_CODE" customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable="" hide="true"/>
				<column type="both" name="PR_ADDR" index="" checkbox="" display="PR_ADDR" customDict="" sysDict="" format="" width="90" isSort="true" align="" halign="" order="" resizable=""/>
				<column type="both" name="SIGN_TIME" index="" checkbox="" display="SIGN_TIME" customDict="" sysDict="" format="" width="0" isSort="" beanFormatter="dateFormatter" expType="date" expFmt="yyyy/MM/dd"  align="" halign="" order="" resizable="" hide="true"/>
				<column type="both" name="GUOHU_TIME" index="" checkbox="" display="GUOHU_TIME" customDict="" sysDict="" format="" width="0" isSort="" beanFormatter="dateFormatter" expType="date" expFmt="yyyy/MM/dd"  align="" halign="" order="" resizable="" hide="true"/>
				<column type="both" name="CLOSE_TIME" index="" checkbox="" display="CLOSE_TIME" customDict="" sysDict="" format="" width="0" isSort="" beanFormatter="dateFormatter" expType="date" expFmt="yyyy/MM/dd"  align="" halign="" order="" resizable="" hide="true"/>
				<column type="both" name="AGENT_ORG_NAME" index="" checkbox="" display="AGENT_ORG_NAME" customDict="" sysDict="" format="" width="60" isSort="true" align="" halign="" order="" resizable=""/>
				<column type="both" name="AGENT_NAME" index="" checkbox="" display="AGENT_NAME" customDict="" sysDict="" format="" width="60" isSort="true" align="" halign="" order="" resizable=""/>
				<column type="both" name="MOBILE" index="" checkbox="" display="MOBILE" customDict="" sysDict="" format="" width="60" isSort="true" align="" halign="" order="" resizable=""/>
				<column type="both" name="ORG_ID" index="" checkbox="" display="ORG_ID" customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable="" hide="true"/>
				<column type="virtual" name="MANAGER_INFO" referencecol="ORG_ID" index="" checkbox="" display="" customDict="qqManagerInfo" sysDict="" format="" width="60" isSort="true" align="" halign="" order="" resizable="" />
				<column type="both" name="CALLER_ID" index="" checkbox="" display="CALLER_ID" customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable="" hide="true"/>
				<column type="virtual" name="CALLER_NAME" referencecol="CALLER_ID" index="" checkbox="" customDict="qqcdUserIdName" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable="" />
				<column type="both" name="C_ORG_ID" index="" checkbox="" display="C_ORG_ID" customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable="" hide="true"/>
				<column type="virtual" name="C_ORG_NAME" index="" checkbox="" title="所属组"  referencecol="C_ORG_ID"  customDict="qqcdOrgIdName" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>
				<column type="both" name="WZ_NAME" index="" checkbox="" display="WZ_NAME" title="所属区"  referencecol=""  customDict="" sysDict="" format="" width="0" isSort="" align="" halign="" order="" resizable=""/>
			</table-row>
		</grid>
	</query>
</querys>