<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.centaline.trans.mortgage.repository.ToMortgageMapper" >
  <resultMap id="BaseResultMap" type="com.centaline.trans.mortgage.entity.ToMortgage" >
    <id column="PKID" property="pkid" jdbcType="BIGINT" />
    <result column="CASE_CODE" property="caseCode" jdbcType="VARCHAR" />
    <result column="MORT_TYPE" property="mortType" jdbcType="VARCHAR" />
    <result column="MORT_TOTAL_AMOUNT" property="mortTotalAmount" jdbcType="DECIMAL" />
    <result column="FIN_ORG_CODE" property="finOrgCode" jdbcType="VARCHAR" />
    <result column="CUST_CODE" property="custCode" jdbcType="VARCHAR" />
    <result column="COM_AMOUNT" property="comAmount" jdbcType="DECIMAL" />
    <result column="COM_YEAR" property="comYear" jdbcType="INTEGER" />
    <result column="COM_DISCOUNT" property="comDiscount" jdbcType="DECIMAL" />
    <result column="PRF_AMOUNT" property="prfAmount" jdbcType="DECIMAL" />
    <result column="PRF_YEAR" property="prfYear" jdbcType="INTEGER" />
    <result column="LEND_WAY" property="lendWay" jdbcType="VARCHAR" />
    <result column="HOUSE_NUM" property="houseNum" jdbcType="INTEGER" />
    <result column="IS_LOANER_ARRIVE" property="isLoanerArrive" jdbcType="CHAR" />
    <result column="SIGN_DATE" property="signDate" jdbcType="TIMESTAMP" />
    <result column="APPR_DATE" property="apprDate" jdbcType="TIMESTAMP" />
    <result column="TAZHENG_ARR_DATE" property="tazhengArrDate" jdbcType="TIMESTAMP" />
    <result column="LEND_DATE" property="lendDate" jdbcType="TIMESTAMP" />
    <result column="CUST_COMPANY" property="custCompany" jdbcType="VARCHAR" />
    <result column="IF_REPORT_BEFORE_LEND" property="ifReportBeforeLend" jdbcType="CHAR" />
    <result column="LOANER_NAME" property="loanerName" jdbcType="VARCHAR" />
    <result column="LOANER_PHONE" property="loanerPhone" jdbcType="VARCHAR" />
    <result column="LOANER_ID" property="loanerId" jdbcType="VARCHAR" />    
    <result column="DISPACH_USER_ID" property="dispachUserId" jdbcType="VARCHAR" />  
    <result column="DISPACH_TIME" property="dispachTime" jdbcType="TIMESTAMP" /> 
    <result column="BANK_APPROVE_TIME" property="bankApproveTime" jdbcType="TIMESTAMP" />
    <result column="LOANER_PROCESS_INSTCODE" property="loanerProcessInstCode" jdbcType="VARCHAR" />
    <result column="BANK_LEVEL" property="bankLevel" jdbcType="VARCHAR" />
    <result column="PRI_CREDIT_UNIT" property="priCreditUnit" jdbcType="VARCHAR" />
    <result column="IS_PATCH" property="isPatch" jdbcType="VARCHAR"/>
    <result column="BUY_PATCH_STR" property="buyPatchStr" jdbcType="VARCHAR"/>
    <result column="SELL_PATCH_STR" property="sellPatchStr" jdbcType="VARCHAR"/>
    <result column="PATCH_TIME_BUY" property="patchTimeBuy" jdbcType="TIMESTAMP"/>
    <result column="PATCH_TIME_SELL" property="patchTimeSell" jdbcType="TIMESTAMP"/>
    <result column="APPR_COMPLE_TIME" property="apprCompleTime" jdbcType="TIMESTAMP"/>
    <result column="LOAN_CONTRA_TIME" property="loanContraTime" jdbcType="TIMESTAMP"/>
    <result column="BANK_TYPE" property="bank_type" jdbcType="VARCHAR"/>
    <result column="BOOK_RESULT" property="bookResult" jdbcType="VARCHAR" />
    <result column="BOOK_PERSON" property="bookPerson" jdbcType="VARCHAR" />
	<result column="COLENDER" property="coLender" jdbcType="VARCHAR"/>
    
    <result column="LOANER_ORG_CODE" property="loanerOrgCode" jdbcType="VARCHAR" />
    <result column="LOANER_ORG_ID" property="loanerOrgId" jdbcType="VARCHAR" />
    <result column="LAST_LOAN_BANK" property="lastLoanBank" jdbcType="VARCHAR" />
    <result column="PRF_APPLY_DATE" property="prfApplyDate" jdbcType="TIMESTAMP" />
    <result column="IF_REQUIRE_RECONSIDER" property="ifRequireReconsider" jdbcType="VARCHAR" />
    <result column="IS_DELEGATE_YUCUI" property="isDelegateYucui" jdbcType="VARCHAR" />
    <result column="IS_MAIN_LOAN_BANK" property="isMainLoanBank" jdbcType="VARCHAR" />
    <result column="CUST_NAME" property="custName" jdbcType="VARCHAR" />
    <result column="self_Del_Reason" property="selfDelReason" jdbcType="VARCHAR" />
    <result column="rec_Letter_No" property="recLetterNo" jdbcType="VARCHAR"/>
	<result column="is_Tmp_Bank" property="isTmpBank" jdbcType="VARCHAR"/>
	<result column="TMP_BANK_UPDATE_TIME" property="tmpBankUpdateTime" jdbcType="TIMESTAMP"/>
	<result column="TMP_BANK_UPDATE_BY" property="tmpBankUpdateBy" jdbcType="VARCHAR"/>
	<result column="TMP_BANK_REASON"  property="tmpBankReason" jdbcType="VARCHAR"/>
	<result column="TMP_BANK_STATUS"  property="tmpBankStatus" jdbcType="VARCHAR"/>
	<result column="TMP_BANK_REJECT_REASON" property="tmpBankRejectReason" jdbcType="VARCHAR"/>
	<result column="LOANLOST_APPLY_REASON" property="loanLostApplyReason" jdbcType="VARCHAR"/>
	<result column="LOANLOST_CONFIRM_CODE" property="loanLostConfirmCode" jdbcType="VARCHAR"/>
	<result column="LOAN_AGENT" property="loanAgent" jdbcType="VARCHAR"/>
	<result column="LOAN_AGENT_TEAM" property="loanAgentTeam" jdbcType="VARCHAR"/>
	<result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP"/>
	<result column="UPDATE_TIME" property="updateTime" jdbcType="TIMESTAMP"/>
	<result column="UPDATE_BY" property="updateBy" jdbcType="VARCHAR"/>
	<result column="CREATE_BY" property="createBy" jdbcType="VARCHAR"/>
    <result column="IS_ACTIVE" property="isActive" jdbcType="CHAR"/>
    <result column="STATE_IN_BANK" property="stateInBank" jdbcType="VARCHAR"/>
    
    
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.centaline.trans.mortgage.entity.ToMortgage" extends="BaseResultMap" >
    <result column="REMARK" property="remark" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    PKID, CASE_CODE, MORT_TYPE, MORT_TOTAL_AMOUNT, FIN_ORG_CODE, CUST_CODE, COM_AMOUNT, 
    COM_YEAR, COM_DISCOUNT, PRF_AMOUNT, PRF_YEAR, LEND_WAY, HOUSE_NUM, IS_LOANER_ARRIVE, 
    SIGN_DATE, APPR_DATE, TAZHENG_ARR_DATE, LEND_DATE, CUST_COMPANY, IF_REPORT_BEFORE_LEND, 
    LOANER_ID,LOANER_ORG_CODE,LOANER_ORG_ID,DISPACH_USER_ID,DISPACH_TIME,BANK_APPROVE_TIME,LOANER_PROCESS_INSTCODE,BANK_LEVEL,
    LOANER_NAME, LOANER_PHONE,LAST_LOAN_BANK,PRF_APPLY_DATE,IF_REQUIRE_RECONSIDER,IS_DELEGATE_YUCUI,
    IS_MAIN_LOAN_BANK,CUST_NAME,self_Del_Reason,rec_Letter_No,is_Tmp_Bank,TMP_BANK_UPDATE_TIME,
    TMP_BANK_UPDATE_BY,TMP_BANK_REASON,LOANLOST_APPLY_REASON,LOANLOST_CONFIRM_CODE,
    IS_ACTIVE,STATE_IN_BANK,CREATE_TIME,UPDATE_TIME,CREATE_BY,UPDATE_BY,PRI_CREDIT_UNIT,IS_PATCH,BUY_PATCH_STR,SELL_PATCH_STR,PATCH_TIME_BUY,PATCH_TIME_SELL,APPR_COMPLE_TIME,LOAN_CONTRA_TIME,BANK_TYPE,BOOK_RESULT,BOOK_PERSON,COLENDER
  </sql>
  <sql id="Blob_Column_List" >
    REMARK
  </sql>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Long" >
    select 
	    <include refid="Base_Column_List" />
	    ,
	    <include refid="Blob_Column_List" />
    from sctrans.T_TO_MORTGAGE
    where PKID = #{pkid,jdbcType=BIGINT}
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    delete from sctrans.T_TO_MORTGAGE
    where PKID = #{pkid,jdbcType=BIGINT}
  </delete>
 
  <insert id="insertSelective" parameterType="com.centaline.trans.mortgage.entity.ToMortgage" >
    <selectKey resultType="java.lang.Long" keyProperty="pkid" order="AFTER" >
    	SELECT @@IDENTITY
  	</selectKey>
    insert into sctrans.T_TO_MORTGAGE
    <trim prefix="(" suffix=")" suffixOverrides="," >
    	CREATE_TIME,create_by,update_time,UPDATE_BY,
      <if test="caseCode != null" >
        CASE_CODE,
      </if>
      <if test="mortType != null" >
        MORT_TYPE,
      </if>
      <if test="mortTotalAmount != null" >
        MORT_TOTAL_AMOUNT,
      </if>
      <if test="finOrgCode != null" >
        FIN_ORG_CODE,
      </if>
      <if test="custCode != null" >
        CUST_CODE,
      </if>
      <if test="comAmount != null" >
        COM_AMOUNT,
      </if>
      <if test="comYear != null" >
        COM_YEAR,
      </if>
      <if test="comDiscount != null" >
        COM_DISCOUNT,
      </if>
      <if test="prfAmount != null" >
        PRF_AMOUNT,
      </if>
      <if test="prfYear != null" >
        PRF_YEAR,
      </if>
      <if test="lendWay != null" >
        LEND_WAY,
      </if>
      <if test="houseNum != null" >
        HOUSE_NUM,
      </if>
      <if test="isLoanerArrive != null" >
        IS_LOANER_ARRIVE,
      </if>
      <if test="signDate != null" >
        SIGN_DATE,
      </if>
      <if test="apprDate != null" >
        APPR_DATE,
      </if>
      <if test="tazhengArrDate != null" >
        TAZHENG_ARR_DATE,
      </if>
      <if test="lendDate != null" >
        LEND_DATE,
      </if>
      <if test="custCompany != null" >
        CUST_COMPANY,
      </if>
      <if test="ifReportBeforeLend != null" >
        IF_REPORT_BEFORE_LEND,
      </if>
      <if test="loanerName != null" >
        LOANER_NAME,
      </if>
      <if test="loanerPhone != null" >
        LOANER_PHONE,
      </if>
      <if test="loanerId != null" >
        LOANER_ID,
      </if>
      
      <if test="dispachUserId != null" >
        DISPACH_USER_ID,
      </if>
      
      <if test="dispachTime != null" >
        DISPACH_TIME,
      </if>
            
      <if test="bankApproveTime != null" >
        BANK_APPROVE_TIME,
      </if>      
      
      <if test="loanerProcessInstCode != null" >
        LOANER_PROCESS_INSTCODE,
      </if>
      <if test="bankLevel != null" >
        BANK_LEVEL,
      </if>
      
      <if test="loanerOrgCode != null" >
        LOANER_ORG_CODE,
      </if>
      <if test="loanerOrgId != null" >
        LOANER_ORG_ID,
      </if>
      <if test="remark != null" >
        REMARK,
      </if>
      <if test="lastLoanBank != null" >
        LAST_LOAN_BANK,
      </if>
      <if test="prfApplyDate != null" >
        PRF_APPLY_DATE,
      </if>
      <if test="ifRequireReconsider != null" >
        IF_REQUIRE_RECONSIDER,
      </if>
      <if test="isDelegateYucui != null" >
        IS_DELEGATE_YUCUI,
      </if>
      <if test="isMainLoanBank != null" >
        IS_MAIN_LOAN_BANK,
      </if>
      <if test="custName != null" >
        CUST_NAME,
      </if>
       <if test="selfDelReason != null" >
        self_Del_Reason,
      </if>
      <if test="recLetterNo != null">
      	rec_Letter_No,
      </if>
      <if test="isTmpBank != null">
      	is_Tmp_Bank,
      </if>
      <if test="tmpBankUpdateTime != null">
      	TMP_BANK_UPDATE_TIME,
      </if>
      <if test="tmpBankUpdateBy != null">
      	TMP_BANK_UPDATE_BY,
      </if>
      <if test="tmpBankReason !=null">
      	TMP_BANK_REASON,
      </if>
      <if test="loanLostApplyReason !=null">
      	LOANLOST_APPLY_REASON,
      </if>
      <if test="loanLostConfirmCode !=null">
      	LOANLOST_CONFIRM_CODE,
      </if>
      <if test="loanAgent !=null">
      	LOAN_AGENT,
      </if>
      <if test="loanAgentTeam !=null">
      	LOAN_AGENT_TEAM,
      </if>
      <if test="priCreditUnit !=null">
      	PRI_CREDIT_UNIT,
      </if>
      <if test="bank_type != null">
      	BANK_TYPE,
      </if>
      <if test="bookResult != null">
      	BOOK_RESULT,
      </if>
      <if test="bookPerson != null">
      	BOOK_PERSON,
      </if>
      <if test="coLender != null">
      	COLENDER,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      GETDATE(),@{SESSION_USER_ID},GETDATE(),@{SESSION_USER_ID},
      <if test="caseCode != null" >
        #{caseCode,jdbcType=VARCHAR},
      </if>
      <if test="mortType != null" >
        #{mortType,jdbcType=VARCHAR},
      </if>
      <if test="mortTotalAmount != null" >
        #{mortTotalAmount,jdbcType=DECIMAL},
      </if>
      <if test="finOrgCode != null" >
        #{finOrgCode,jdbcType=VARCHAR},
      </if>
      <if test="custCode != null" >
        #{custCode,jdbcType=VARCHAR},
      </if>
      <if test="comAmount != null" >
        #{comAmount,jdbcType=DECIMAL},
      </if>
      <if test="comYear != null" >
        #{comYear,jdbcType=INTEGER},
      </if>
      <if test="comDiscount != null" >
        #{comDiscount,jdbcType=DECIMAL},
      </if>
      <if test="prfAmount != null" >
        #{prfAmount,jdbcType=DECIMAL},
      </if>
      <if test="prfYear != null" >
        #{prfYear,jdbcType=INTEGER},
      </if>
      <if test="lendWay != null" >
        #{lendWay,jdbcType=VARCHAR},
      </if>
      <if test="houseNum != null" >
        #{houseNum,jdbcType=INTEGER},
      </if>
      <if test="isLoanerArrive != null" >
        #{isLoanerArrive,jdbcType=CHAR},
      </if>
      <if test="signDate != null" >
        #{signDate,jdbcType=TIMESTAMP},
      </if>
      <if test="apprDate != null" >
        #{apprDate,jdbcType=TIMESTAMP},
      </if>
      <if test="tazhengArrDate != null" >
        #{tazhengArrDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lendDate != null" >
        #{lendDate,jdbcType=TIMESTAMP},
      </if>
      <if test="custCompany != null" >
        #{custCompany,jdbcType=VARCHAR},
      </if>
      <if test="ifReportBeforeLend != null" >
        #{ifReportBeforeLend,jdbcType=CHAR},
      </if>
      <if test="loanerName != null" >
        #{loanerName,jdbcType=VARCHAR},
      </if>
      <if test="loanerPhone != null" >
        #{loanerPhone,jdbcType=VARCHAR},
      </if>
      <if test="loanerId != null" >
        #{loanerId,jdbcType=VARCHAR},      
      </if>
      
      <if test="dispachUserId != null" >
        #{dispachUserId,jdbcType=VARCHAR},
      </if>      

      <if test="dispachTime != null" >
        #{dispachTime,jdbcType=TIMESTAMP},
      </if>

      <if test="bankApproveTime != null" >
        #{bankApproveTime,jdbcType=TIMESTAMP},
      </if>
      
      <if test="loanerProcessInstCode != null" >
        #{loanerProcessInstCode,jdbcType=VARCHAR},
      </if>
      
      <if test="bankLevel != null" >
         #{bankLevel,jdbcType=VARCHAR},
      </if>
      <if test="loanerOrgCode != null" >
        #{loanerOrgCode,jdbcType=VARCHAR},
      </if>
      <if test="loanerOrgId != null" >
        #{loanerOrgId,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=LONGVARCHAR},
      </if>
      <if test="lastLoanBank != null" >
        #{lastLoanBank,jdbcType=VARCHAR},
      </if>
      <if test="prfApplyDate != null" >
        #{prfApplyDate,jdbcType=TIMESTAMP},
      </if>
      <if test="ifRequireReconsider != null" >
        #{ifRequireReconsider,jdbcType=VARCHAR},
      </if>
      <if test="isDelegateYucui != null" >
        #{isDelegateYucui,jdbcType=VARCHAR},
      </if>
      <if test="isMainLoanBank != null" >
        #{isMainLoanBank,jdbcType=VARCHAR},
      </if>
      <if test="custName != null" >
        #{custName,jdbcType=VARCHAR},
      </if>
      <if test="selfDelReason != null" >
        #{selfDelReason,jdbcType=VARCHAR},
      </if>
      <if test="recLetterNo != null">
      	#{recLetterNo,jdbcType=VARCHAR},
      </if>
      <if test="isTmpBank != null">
      	#{isTmpBank,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankUpdateTime != null">
      	#{tmpBankUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="tmpBankUpdateBy != null">
      	#{tmpBankUpdateBy,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankReason != null">
      	#{tmpBankReason,jdbcType=VARCHAR},
      </if>
      <if test="loanLostApplyReason != null">
      	#{loanLostApplyReason,jdbcType=VARCHAR},
      </if>
      <if test="loanLostConfirmCode != null">
      	#{loanLostConfirmCode,jdbcType=VARCHAR},
      </if>
      <if test="loanAgent != null">
      	#{loanAgent,jdbcType=VARCHAR},
      </if>
      <if test="loanAgentTeam != null">
      	#{loanAgentTeam,jdbcType=VARCHAR},
      </if>
      <if test="priCreditUnit !=null">
      	#{priCreditUnit,jdbcType=VARCHAR},
      </if>
      <if test="bank_type != null">
      	#{bank_type,jdbcType=VARCHAR},
      </if>
      <if test="bookResult != null">
      	#{bookResult,jdbcType=VARCHAR},
      </if>
      <if test="bookPerson != null">
      	#{bookPerson,jdbcType=VARCHAR},
      </if>
      <if test="coLender != null">
      	#{coLender,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  
  <update id="updateTmpBankStatus" parameterType="java.lang.String" >
  		 update sctrans.T_TO_MORTGAGE set is_Tmp_Bank = '0' where case_code=#{caseCode,jdbcType=VARCHAR};
  </update>
  
  <update id="updateIsPatch" parameterType="com.centaline.trans.mortgage.entity.ToMortgage">
  	update sctrans.T_TO_MORTGAGE
  	<set>
  		IS_PATCH = '0',BUY_PATCH_STR = null,SELL_PATCH_STR=null,PATCH_TIME_BUY = null,PATCH_TIME_SELL=null
  		
  	</set>
  	where PKID = #{pkid,jdbcType=BIGINT}; 
  </update>
  
  <update id="update" parameterType="com.centaline.trans.mortgage.entity.ToMortgage" >
    update sctrans.T_TO_MORTGAGE
    <set >
      <if test="caseCode != null" >
        CASE_CODE = #{caseCode,jdbcType=VARCHAR},
      </if>
      <if test="mortType != null" >
        MORT_TYPE = #{mortType,jdbcType=VARCHAR},
      </if>
      <if test="mortTotalAmount != null" >
        MORT_TOTAL_AMOUNT = #{mortTotalAmount,jdbcType=DECIMAL},
      </if>
      <if test="finOrgCode != null" >
        FIN_ORG_CODE = #{finOrgCode,jdbcType=VARCHAR},
      </if>
      <if test="custCode != null" >
        CUST_CODE = #{custCode,jdbcType=VARCHAR},
      </if>
      <if test="comAmount != null">
        COM_AMOUNT = #{comAmount,jdbcType=DECIMAL},
    	</if>
	<if test="comYear !=null">
     	COM_YEAR = #{comYear,jdbcType=INTEGER},
  	</if>
  	<if test="comDiscount != null" > 
        COM_DISCOUNT = #{comDiscount,jdbcType=DECIMAL},
     </if>
      <if test="prfAmount != null">
      	PRF_AMOUNT = #{prfAmount,jdbcType=DECIMAL},
      </if>
        
       <if test="prfYear != null">
       	PRF_YEAR = #{prfYear,jdbcType=INTEGER},
       </if> 
      <if test="lendWay != null" >
        LEND_WAY = #{lendWay,jdbcType=VARCHAR},
      </if>
      <if test="houseNum != null" >
        HOUSE_NUM = #{houseNum,jdbcType=INTEGER},
      </if>
      <if test="isLoanerArrive != null" >
        IS_LOANER_ARRIVE = #{isLoanerArrive,jdbcType=CHAR},
      </if>
      <if test="signDate != null" >
        SIGN_DATE = #{signDate,jdbcType=TIMESTAMP},
      </if>
      <if test="apprDate != null" >
        APPR_DATE = #{apprDate,jdbcType=TIMESTAMP},
      </if>
      <if test="tazhengArrDate != null" >
        TAZHENG_ARR_DATE = #{tazhengArrDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lendDate != null" >
        LEND_DATE = #{lendDate,jdbcType=TIMESTAMP},
      </if>
      <if test="custCompany != null" >
        CUST_COMPANY = #{custCompany,jdbcType=VARCHAR},
      </if>
      <if test="ifReportBeforeLend != null" >
        IF_REPORT_BEFORE_LEND = #{ifReportBeforeLend,jdbcType=CHAR},
      </if>
      <if test="loanerName != null" >
        LOANER_NAME = #{loanerName,jdbcType=VARCHAR},
      </if>
      <if test="loanerPhone != null" >
        LOANER_PHONE = #{loanerPhone,jdbcType=VARCHAR},
      </if>
      <if test="loanerId != null" >
        LOANER_ID = #{loanerId,jdbcType=VARCHAR},
      </if>
      
      <if test="dispachUserId != null" >
        DISPACH_USER_ID = #{dispachUserId,jdbcType=VARCHAR},
      </if>      
      <if test="dispachTime != null" >
        DISPACH_TIME = #{dispachTime,jdbcType=TIMESTAMP},
      </if>
      
        BANK_APPROVE_TIME = #{bankApproveTime,jdbcType=TIMESTAMP},      
      
      <if test="loanerProcessInstCode != null" >
        LOANER_PROCESS_INSTCODE = #{loanerProcessInstCode,jdbcType=VARCHAR},
      </if>
      
      <if test="bankLevel != null" >
        BANK_LEVEL = #{bankLevel,jdbcType=VARCHAR},
      </if>
      <if test="loanerOrgCode != null" >
        LOANER_ORG_CODE = #{loanerOrgCode,jdbcType=VARCHAR},
      </if>
      <if test="loanerOrgId != null" >
        LOANER_ORG_ID = #{loanerOrgId,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        REMARK = #{remark,jdbcType=LONGVARCHAR},
      </if>
      <if test="lastLoanBank != null" >
        LAST_LOAN_BANK = #{lastLoanBank,jdbcType=VARCHAR},
      </if>
      <if test="prfApplyDate != null" >
        PRF_APPLY_DATE = #{prfApplyDate,jdbcType=TIMESTAMP},
      </if>
      <if test="ifRequireReconsider != null" >
        IF_REQUIRE_RECONSIDER = #{ifRequireReconsider,jdbcType=VARCHAR},
      </if>
      <if test="isDelegateYucui != null" >
        IS_DELEGATE_YUCUI = #{isDelegateYucui,jdbcType=VARCHAR},
      </if>
      <if test="isMainLoanBank != null" >
        IS_MAIN_LOAN_BANK = #{isMainLoanBank,jdbcType=VARCHAR},
      </if>
      <if test="custName != null" >
        CUST_NAME = #{custName,jdbcType=VARCHAR},
      </if>
      <if test="selfDelReason != null" >
        self_Del_Reason = #{selfDelReason,jdbcType=VARCHAR},
      </if>
      <if test="recLetterNo != null">
      	rec_Letter_No = #{recLetterNo,jdbcType=VARCHAR},
      </if>
      <if test="isTmpBank != null">
      	is_Tmp_Bank = #{isTmpBank,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankUpdateTime != null">
      	TMP_BANK_UPDATE_TIME = #{tmpBankUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="tmpBankUpdateBy != null">
      	TMP_BANK_UPDATE_BY = #{tmpBankUpdateBy,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankReason != null">
      	TMP_BANK_REASON=#{tmpBankReason,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankStatus != null">
        TMP_BANK_STATUS=#{tmpBankStatus,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankRejectReason != null">
        TMP_BANK_REJECT_REASON=#{tmpBankRejectReason,jdbcType=VARCHAR},
      </if>
      <if test="loanLostApplyReason !=null">
      	LOANLOST_APPLY_REASON=#{loanLostApplyReason,jdbcType=VARCHAR},      	
      </if>
      <if test="loanLostConfirmCode !=null">
      	LOANLOST_CONFIRM_CODE=#{loanLostConfirmCode,jdbcType=VARCHAR},
      </if>
      <if test="loanAgent != null">
      	LOAN_AGENT = #{loanAgent,jdbcType=VARCHAR},
      </if>
      <if test="loanAgentTeam != null">
      	LOAN_AGENT_TEAM = #{loanAgentTeam,jdbcType=VARCHAR},
      </if>
      
      <if test="stateInBank != null">
      	STATE_IN_BANK = #{stateInBank,jdbcType=VARCHAR},
      </if>
      <if test="priCreditUnit !=null">
      	PRI_CREDIT_UNIT =#{priCreditUnit,jdbcType=VARCHAR},
      </if>
      <if test="isPatch != null">
      	IS_PATCH = #{isPatch,jdbcType=VARCHAR},
      </if>
      <if test="buyPatchStr != null">
      	BUY_PATCH_STR = #{buyPatchStr,jdbcType=VARCHAR},
      </if>
      <if test="sellPatchStr != null">
      	SELL_PATCH_STR =#{sellPatchStr,jdbcType=VARCHAR},
      </if>
      <if test="patchTimeBuy != null">
      	PATCH_TIME_BUY = #{patchTimeBuy,jdbcType=TIMESTAMP},
      </if>
      <if test="patchTimeSell != null">
      	PATCH_TIME_SELL = #{patchTimeSell,jdbcType=TIMESTAMP},
      </if>
      <if test="apprCompleTime != null">
      	APPR_COMPLE_TIME = #{apprCompleTime,jdbcType=TIMESTAMP},
      </if>
      <if test="loanContraTime != null">
      	LOAN_CONTRA_TIME = #{loanContraTime,jdbcType=TIMESTAMP},
      </if>
      <if test="bank_type != null">
    	BANK_TYPE = #{bank_type,jdbcType=VARCHAR},
      </if>
      <if test="bookResult !=null">
      	BOOK_RESULT = #{bookResult,jdbcType=VARCHAR},
      </if>
      <if test="bookPerson != null">
      	BOOK_PERSON = #{bookPerson,jdbcType=VARCHAR},
      </if>
      <if test="coLender != null">
      	COLENDER = #{coLender,jdbcType=VARCHAR},
      </if>
    </set>
    ,IS_ACTIVE='1'
    ,update_time=GETDATE(),UPDATE_BY=@{SESSION_USER_ID}
    where PKID = #{pkid,jdbcType=BIGINT};
    
  </update>
  <update id="inActiveMortageByCaseCode" parameterType="java.lang.String" >
    update sctrans.T_TO_MORTGAGE set IS_ACTIVE='0',LAST_LOAN_BANK=NULL,update_time=GETDATE(),UPDATE_BY=@{SESSION_USER_ID},TMP_BANK_UPDATE_BY=null,TMP_BANK_STATUS=null,TMP_BANK_REASON=null,TMP_BANK_REJECT_REASON=null,TMP_BANK_UPDATE_TIME=null,LOAN_AGENT=null,LOAN_AGENT_TEAM=null where case_code =#{0}
    </update>
 
 <select id="findToMortgageByCaseCode" parameterType="java.lang.String" resultMap="ResultMapWithBLOBs"  >
 	select * from sctrans.T_TO_MORTGAGE where case_code=#{caseCode,jdbcType=VARCHAR}  and IS_ACTIVE='1'
 </select>
 
  
  <select id="findToMortgageByCaseCodeAndDisTime" parameterType="java.util.HashMap" resultMap="ResultMapWithBLOBs"  >
 	select TOP 1 * from  sctrans.T_TO_MORTGAGE 
 	where CASE_CODE = #{caseCode,jdbcType=VARCHAR}  
 	AND  IS_MAIN_LOAN_BANK = #{isMainLoanBank,jdbcType=VARCHAR}  
 	ORDER BY IS_ACTIVE  DESC	
 	<!-- AND  IS_ACTIVE='1' -->
 </select>
 
 <select id="getMortgageByCaseCode" parameterType="java.lang.String" resultMap="ResultMapWithBLOBs"  >
 	select * from sctrans.T_TO_MORTGAGE where case_code=#{caseCode,jdbcType=VARCHAR} and IS_TMP_BANK = '1'
 </select>
 
 <select id="findToMortgageByCaseCodeNoBlank" parameterType="java.lang.String" resultMap="ResultMapWithBLOBs"  >
 	select * from sctrans.T_TO_MORTGAGE where case_code=#{caseCode,jdbcType=VARCHAR} and IS_ACTIVE='1'
 </select>
 
 <select id="findToMortgageByCaseCodeAndLoanerId" resultMap="BaseResultMap" parameterType="java.util.HashMap">
	    select 
		<include refid="Base_Column_List" />
	    from sctrans.T_TO_MORTGAGE
	    where CASE_CODE = #{caseCode,jdbcType=VARCHAR} 
	    	  AND LOANER_ID = #{loanerId,jdbcType=VARCHAR} 
	    	  AND IS_ACTIVE='1'
  </select> 
 
 
 <select id="findToMortgageByCaseCodeAndBankType" parameterType="com.centaline.trans.mortgage.entity.ToMortgage" resultMap="ResultMapWithBLOBs"  >
 	select * from sctrans.T_TO_MORTGAGE where case_code=#{caseCode,jdbcType=VARCHAR} and IS_ACTIVE='1'
 	<if test="isMainLoanBank != null">
 	 	and is_main_loan_bank=#{isMainLoanBank,jdbcType=VARCHAR}
 	</if>
 </select>
  <select id="findToMortgageByCondition" parameterType="com.centaline.trans.mortgage.entity.ToMortgage" resultMap="ResultMapWithBLOBs"  >
 	select * from sctrans.T_TO_MORTGAGE where case_code=#{caseCode,jdbcType=VARCHAR} 
 	
 	<if test="mortType != null">
 	 	and mort_Type=#{mortType,jdbcType=VARCHAR}
 	</if>
 	 <if test="isDelegateYucui != null">
 	 	and is_Delegate_Yucui=#{isDelegateYucui,jdbcType=VARCHAR}
 	</if>
 	<if test="isActive != null">
 		and IS_ACTIVE=#{isActive,jdbcType=VARCHAR}
 	</if>
 	<if test="isMainLoanBank != null">
 		and is_main_loan_bank=#{isMainLoanBank,jdbcType=VARCHAR}
 	</if>
 </select>
   <select id="findToMortgageByConditionWithCommLoan" parameterType="com.centaline.trans.mortgage.entity.ToMortgage" resultMap="ResultMapWithBLOBs"  >
 	select * from sctrans.T_TO_MORTGAGE where case_code=#{caseCode,jdbcType=VARCHAR} 
 		
 	<if test="mortType != null">
 	 	and mort_Type=#{mortType,jdbcType=VARCHAR}
 	</if>
 	 <if test="isDelegateYucui != null">
 	 	and is_Delegate_Yucui=#{isDelegateYucui,jdbcType=VARCHAR}
 	</if>
 	<if test="isActive != null">
 		and IS_ACTIVE=#{isActive,jdbcType=VARCHAR}
 	</if>
 	<if test="isMainLoanBank != null">
 		and is_main_loan_bank=#{isMainLoanBank,jdbcType=VARCHAR}
 	</if>
 </select>
 
 <update id="restSetLastLoanBank" parameterType="com.centaline.trans.mortgage.entity.ToMortgage" >
 	update sctrans.T_TO_MORTGAGE set last_loan_bank = null
 	,update_time=GETDATE(),UPDATE_BY=@{SESSION_USER_ID}
 	 where case_code =#{caseCode,jdbcType=VARCHAR} and PKID !=#{pkid,jdbcType=BIGINT} and 
	        mort_type in ('30016001','30016002');
 </update>
  <update id="updateCustNameByCasecode" parameterType="java.lang.String" >
 	update sctrans.T_TO_MORTGAGE  set CUST_CODE = null,CUST_NAME= null 	
 	where case_code =#{caseCode,jdbcType=VARCHAR} and IS_ACTIVE='1'	       
 </update>
 
 <update id="updateBySign" parameterType="com.centaline.trans.mortgage.entity.ToMortgage">
    update sctrans.T_TO_MORTGAGE
    set CUST_NAME = #{custName,jdbcType=VARCHAR},
     	update_time=GETDATE(),UPDATE_BY=@{SESSION_USER_ID}     
    where case_code =#{caseCode,jdbcType=VARCHAR}  and  CUST_CODE =#{custCode,jdbcType=VARCHAR} 
  </update>
 
  <select id="findToMortgageByCaseCodeAndCustcode" parameterType="com.centaline.trans.mortgage.entity.ToMortgage" resultMap="ResultMapWithBLOBs"  >
 	select * from sctrans.T_TO_MORTGAGE where case_code=#{caseCode,jdbcType=VARCHAR} and IS_ACTIVE='1' and CUST_CODE=#{custCode,jdbcType=VARCHAR} 	
 </select>
 
 <update id="updateStateInBankByBizCode" parameterType="com.centaline.trans.mortgage.entity.ToMortgage">
    update sctrans.T_TO_MORTGAGE
    set STATE_IN_BANK = #{stateInBank,jdbcType=VARCHAR},
      update_time=GETDATE(),UPDATE_BY=@{SESSION_USER_ID}     
    where PKID =#{pkid,jdbcType=BIGINT} 
  </update>
  
  <select id="getMortgageByBizCode" resultMap="ResultMapWithBLOBs" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from sctrans.T_TO_MORTGAGE
    where PKID = #{bizCode,jdbcType=BIGINT}
  </select>
 
 
 <!-- 测试使用 -->
   <update id="updateByTest" parameterType="com.centaline.trans.mortgage.entity.ToMortgage" >
    update sctrans.T_TO_MORTGAGE
    <set >
      <if test="caseCode != null" >
        CASE_CODE = #{caseCode,jdbcType=VARCHAR},
      </if>
      <if test="mortType != null" >
        MORT_TYPE = #{mortType,jdbcType=VARCHAR},
      </if>
      <if test="mortTotalAmount != null" >
        MORT_TOTAL_AMOUNT = #{mortTotalAmount,jdbcType=DECIMAL},
      </if>
      <if test="finOrgCode != null" >
        FIN_ORG_CODE = #{finOrgCode,jdbcType=VARCHAR},
      </if>
      <if test="custCode != null" >
        CUST_CODE = #{custCode,jdbcType=VARCHAR},
      </if>
       <if test="comAmount != null" >
        COM_AMOUNT = #{comAmount,jdbcType=DECIMAL},
       </if>
     <if test="comYear != null" >
        COM_YEAR = #{comYear,jdbcType=INTEGER},
     </if>
      <if test="comDiscount != null" > 
        COM_DISCOUNT = #{comDiscount,jdbcType=DECIMAL},
      </if> 
      <if test="prfAmount != null" >
        PRF_AMOUNT = #{prfAmount,jdbcType=DECIMAL},
     </if>
      <if test="prfYear != null" >
        PRF_YEAR = #{prfYear,jdbcType=INTEGER},
     </if>
      <if test="lendWay != null" >
        LEND_WAY = #{lendWay,jdbcType=VARCHAR},
      </if>
      <if test="houseNum != null" >
        HOUSE_NUM = #{houseNum,jdbcType=INTEGER},
      </if>
      <if test="isLoanerArrive != null" >
        IS_LOANER_ARRIVE = #{isLoanerArrive,jdbcType=CHAR},
      </if>
      <if test="signDate != null" >
        SIGN_DATE = #{signDate,jdbcType=TIMESTAMP},
      </if>
      <if test="apprDate != null" >
        APPR_DATE = #{apprDate,jdbcType=TIMESTAMP},
      </if>
      <if test="tazhengArrDate != null" >
        TAZHENG_ARR_DATE = #{tazhengArrDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lendDate != null" >
        LEND_DATE = #{lendDate,jdbcType=TIMESTAMP},
      </if>
      <if test="custCompany != null" >
        CUST_COMPANY = #{custCompany,jdbcType=VARCHAR},
      </if>
      <if test="ifReportBeforeLend != null" >
        IF_REPORT_BEFORE_LEND = #{ifReportBeforeLend,jdbcType=VARCHAR},
      </if>
      <if test="loanerName != null" >
        LOANER_NAME = #{loanerName,jdbcType=VARCHAR},
      </if>
      <if test="loanerPhone != null" >
        LOANER_PHONE = #{loanerPhone,jdbcType=VARCHAR},
      </if>
      <if test="loanerId != null" >
        LOANER_ID = #{loanerId,jdbcType=VARCHAR},
      </if>
      
      <if test="dispachUserId != null" >
        DISPACH_USER_ID = #{dispachUserId,jdbcType=VARCHAR},
      </if>      
      <if test="dispachTime != null" >
        DISPACH_TIME = #{dispachTime,jdbcType=TIMESTAMP},
      </if>
      
      <if test="bankApproveTime != null" >
        BANK_APPROVE_TIME = #{bankApproveTime,jdbcType=TIMESTAMP},
      </if> 
      
      <if test="loanerProcessInstCode != null" >
        LOANER_PROCESS_INSTCODE = #{loanerProcessInstCode,jdbcType=VARCHAR},
      </if>
      
     <if test="bankLevel != null" >
        BANK_LEVEL = #{bankLevel,jdbcType=VARCHAR},
      </if>
      
      <if test="loanerOrgCode != null" >
        LOANER_ORG_CODE = #{loanerOrgCode,jdbcType=VARCHAR},
      </if>
      <if test="loanerOrgId != null" >
        LOANER_ORG_ID = #{loanerOrgId,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        REMARK = #{remark,jdbcType=LONGVARCHAR},
      </if>
      <if test="lastLoanBank != null" >
        LAST_LOAN_BANK = #{lastLoanBank,jdbcType=VARCHAR},
      </if>
      <if test="prfApplyDate != null" >
        PRF_APPLY_DATE = #{prfApplyDate,jdbcType=TIMESTAMP},
      </if>
      <if test="ifRequireReconsider != null" >
        IF_REQUIRE_RECONSIDER = #{ifRequireReconsider,jdbcType=VARCHAR},
      </if>
      <if test="isDelegateYucui != null" >
        IS_DELEGATE_YUCUI = #{isDelegateYucui,jdbcType=VARCHAR},
      </if>
      <if test="isMainLoanBank != null" >
        IS_MAIN_LOAN_BANK = #{isMainLoanBank,jdbcType=VARCHAR},
      </if>
      <if test="custName != null" >
        CUST_NAME = #{custName,jdbcType=VARCHAR},
      </if>
      <if test="selfDelReason != null" >
        self_Del_Reason = #{selfDelReason,jdbcType=VARCHAR},
      </if>
      <if test="recLetterNo != null">
      	rec_Letter_No = #{recLetterNo,jdbcType=VARCHAR},
      </if>
      <if test="isTmpBank != null">
      	is_Tmp_Bank = #{isTmpBank,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankUpdateTime != null">
      	TMP_BANK_UPDATE_TIME = #{tmpBankUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="tmpBankUpdateBy != null">
      	TMP_BANK_UPDATE_BY = #{tmpBankUpdateBy,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankReason != null">
      	TMP_BANK_REASON=#{tmpBankReason,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankStatus != null">
        TMP_BANK_STATUS=#{tmpBankStatus,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankRejectReason != null">
        TMP_BANK_REJECT_REASON=#{tmpBankRejectReason,jdbcType=VARCHAR},
      </if>
      <if test="loanLostApplyReason !=null">
      	LOANLOST_APPLY_REASON=#{loanLostApplyReason,jdbcType=VARCHAR},      	
      </if>
      <if test="loanLostConfirmCode !=null">
      	LOANLOST_CONFIRM_CODE=#{loanLostConfirmCode,jdbcType=VARCHAR},
      </if>
      <if test="loanAgent != null">
      	LOAN_AGENT = #{loanAgent,jdbcType=VARCHAR},
      </if>
      <if test="loanAgentTeam != null">
      	LOAN_AGENT_TEAM = #{loanAgentTeam,jdbcType=VARCHAR},
      </if>
        <if test="isActive != null">
      	IS_ACTIVE = #{isActive,jdbcType=CHAR},
      </if>
      <if test="stateInBank != null">
      	STATE_IN_BANK = #{stateInBank,jdbcType=VARCHAR},
      </if>
       <if test="updateTime != null">
      	CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      </if>
       <if test="updateBy != null">
      	CREATE_BY = #{createBy,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
      	UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
      </if>
       <if test="createBy != null">
      	UPDATE_BY = #{updateBy,jdbcType=VARCHAR},
      </if>
    </set>
    where PKID = #{pkid,jdbcType=BIGINT};
    
  </update>
  
  
  
  
  <update id="updateByPkId" parameterType="com.centaline.trans.mortgage.entity.ToMortgage" >
    update sctrans.T_TO_MORTGAGE
    <set >
      <if test="caseCode != null" >
        CASE_CODE = #{caseCode,jdbcType=VARCHAR},
      </if>
      <if test="mortType != null" >
        MORT_TYPE = #{mortType,jdbcType=VARCHAR},
      </if>
      <if test="mortTotalAmount != null" >
        MORT_TOTAL_AMOUNT = #{mortTotalAmount,jdbcType=DECIMAL},
      </if>
      <if test="finOrgCode != null" >
        FIN_ORG_CODE = #{finOrgCode,jdbcType=VARCHAR},
      </if>
      <if test="custCode != null" >
        CUST_CODE = #{custCode,jdbcType=VARCHAR},
      </if>
       <if test="comAmount != null" >
        COM_AMOUNT = #{comAmount,jdbcType=DECIMAL},
       </if>
     <if test="comYear != null" >
        COM_YEAR = #{comYear,jdbcType=INTEGER},
     </if>
      <if test="comDiscount != null" > 
        COM_DISCOUNT = #{comDiscount,jdbcType=DECIMAL},
      </if> 
      <if test="prfAmount != null" >
        PRF_AMOUNT = #{prfAmount,jdbcType=DECIMAL},
     </if>
      <if test="prfYear != null" >
        PRF_YEAR = #{prfYear,jdbcType=INTEGER},
     </if>
      <if test="lendWay != null" >
        LEND_WAY = #{lendWay,jdbcType=VARCHAR},
      </if>
      <if test="houseNum != null" >
        HOUSE_NUM = #{houseNum,jdbcType=INTEGER},
      </if>
      <if test="isLoanerArrive != null" >
        IS_LOANER_ARRIVE = #{isLoanerArrive,jdbcType=CHAR},
      </if>
      <if test="signDate != null" >
        SIGN_DATE = #{signDate,jdbcType=TIMESTAMP},
      </if>
      <if test="apprDate != null" >
        APPR_DATE = #{apprDate,jdbcType=TIMESTAMP},
      </if>
      <if test="tazhengArrDate != null" >
        TAZHENG_ARR_DATE = #{tazhengArrDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lendDate != null" >
        LEND_DATE = #{lendDate,jdbcType=TIMESTAMP},
      </if>
      <if test="custCompany != null" >
        CUST_COMPANY = #{custCompany,jdbcType=VARCHAR},
      </if>
      <if test="ifReportBeforeLend != null" >
        IF_REPORT_BEFORE_LEND = #{ifReportBeforeLend,jdbcType=VARCHAR},
      </if>
      <if test="loanerName != null" >
        LOANER_NAME = #{loanerName,jdbcType=VARCHAR},
      </if>
      <if test="loanerPhone != null" >
        LOANER_PHONE = #{loanerPhone,jdbcType=VARCHAR},
      </if>
      <if test="loanerId != null" >
        LOANER_ID = #{loanerId,jdbcType=VARCHAR},
      </if>
      
      <if test="dispachUserId != null" >
        DISPACH_USER_ID = #{dispachUserId,jdbcType=VARCHAR},
      </if>
      
      <if test="dispachTime != null" >
        DISPACH_TIME = #{dispachTime,jdbcType=TIMESTAMP},
      </if>

      <if test="bankApproveTime != null" >
        BANK_APPROVE_TIME = #{bankApproveTime,jdbcType=TIMESTAMP},
      </if> 
      
      <if test="loanerProcessInstCode != null" >
        LOANER_PROCESS_INSTCODE = #{loanerProcessInstCode,jdbcType=VARCHAR},
      </if>
      
     <if test="bankLevel != null" >
        BANK_LEVEL = #{bankLevel,jdbcType=VARCHAR},
      </if>
      
      <if test="loanerOrgCode != null" >
        LOANER_ORG_CODE = #{loanerOrgCode,jdbcType=VARCHAR},
      </if>
      <if test="loanerOrgId != null" >
        LOANER_ORG_ID = #{loanerOrgId,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        REMARK = #{remark,jdbcType=LONGVARCHAR},
      </if>
      <if test="lastLoanBank != null" >
        LAST_LOAN_BANK = #{lastLoanBank,jdbcType=VARCHAR},
      </if>
      <if test="prfApplyDate != null" >
        PRF_APPLY_DATE = #{prfApplyDate,jdbcType=TIMESTAMP},
      </if>
      <if test="ifRequireReconsider != null" >
        IF_REQUIRE_RECONSIDER = #{ifRequireReconsider,jdbcType=VARCHAR},
      </if>
      <if test="isDelegateYucui != null" >
        IS_DELEGATE_YUCUI = #{isDelegateYucui,jdbcType=VARCHAR},
      </if>
      <if test="isMainLoanBank != null" >
        IS_MAIN_LOAN_BANK = #{isMainLoanBank,jdbcType=VARCHAR},
      </if>
      <if test="custName != null" >
        CUST_NAME = #{custName,jdbcType=VARCHAR},
      </if>
      <if test="selfDelReason != null" >
        self_Del_Reason = #{selfDelReason,jdbcType=VARCHAR},
      </if>
      <if test="recLetterNo != null">
      	rec_Letter_No = #{recLetterNo,jdbcType=VARCHAR},
      </if>
      <if test="isTmpBank != null">
      	is_Tmp_Bank = #{isTmpBank,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankUpdateTime != null">
      	TMP_BANK_UPDATE_TIME = #{tmpBankUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="tmpBankUpdateBy != null">
      	TMP_BANK_UPDATE_BY = #{tmpBankUpdateBy,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankReason != null">
      	TMP_BANK_REASON=#{tmpBankReason,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankStatus != null">
        TMP_BANK_STATUS=#{tmpBankStatus,jdbcType=VARCHAR},
      </if>
      <if test="tmpBankRejectReason != null">
        TMP_BANK_REJECT_REASON=#{tmpBankRejectReason,jdbcType=VARCHAR},
      </if>
      <if test="loanLostApplyReason !=null">
      	LOANLOST_APPLY_REASON=#{loanLostApplyReason,jdbcType=VARCHAR},      	
      </if>
      <if test="loanLostConfirmCode !=null">
      	LOANLOST_CONFIRM_CODE=#{loanLostConfirmCode,jdbcType=VARCHAR},
      </if>
      <if test="loanAgent != null">
      	LOAN_AGENT = #{loanAgent,jdbcType=VARCHAR},
      </if>
      <if test="loanAgentTeam != null">
      	LOAN_AGENT_TEAM = #{loanAgentTeam,jdbcType=VARCHAR},
      </if>
      <if test="isActive != null">
      	IS_ACTIVE = #{isActive,jdbcType=CHAR},
      </if>
      <if test="stateInBank != null">
      	STATE_IN_BANK = #{stateInBank,jdbcType=VARCHAR},
      </if>
      <if test="bank_type != null">
      	BANK_TYPE = #{bank_type,jdbcType=VARCHAR},
      </if>
       UPDATE_TIME = GETDATE(),
       UPDATE_BY =@{SESSION_USER_ID}
    </set>
    where PKID = #{pkid,jdbcType=BIGINT};
  </update>
  
  
    <update id="updateByPrimaryKey" parameterType="com.centaline.trans.mortgage.entity.ToMortgage" >
    update sctrans.T_TO_MORTGAGE    
    set 
      CASE_CODE = #{caseCode,jdbcType=VARCHAR},
      MORT_TYPE = #{mortType,jdbcType=VARCHAR},
      MORT_TOTAL_AMOUNT = #{mortTotalAmount,jdbcType=DECIMAL},      
      FIN_ORG_CODE = #{finOrgCode,jdbcType=VARCHAR},      
      CUST_CODE = #{custCode,jdbcType=VARCHAR},
      COM_AMOUNT = #{comAmount,jdbcType=DECIMAL},
      COM_YEAR = #{comYear,jdbcType=INTEGER},
      COM_DISCOUNT = #{comDiscount,jdbcType=DECIMAL},
      PRF_AMOUNT = #{prfAmount,jdbcType=DECIMAL},
      PRF_YEAR = #{prfYear,jdbcType=INTEGER}, 
      LEND_WAY = #{lendWay,jdbcType=VARCHAR},  
      HOUSE_NUM = #{houseNum,jdbcType=INTEGER}, 
      IS_LOANER_ARRIVE = #{isLoanerArrive,jdbcType=CHAR}, 
      SIGN_DATE = #{signDate,jdbcType=TIMESTAMP},
      APPR_DATE = #{apprDate,jdbcType=TIMESTAMP},
      TAZHENG_ARR_DATE = #{tazhengArrDate,jdbcType=TIMESTAMP},
      LEND_DATE = #{lendDate,jdbcType=TIMESTAMP},      
      CUST_COMPANY = #{custCompany,jdbcType=VARCHAR},     
      IF_REPORT_BEFORE_LEND = #{ifReportBeforeLend,jdbcType=VARCHAR},
      LOANER_NAME = #{loanerName,jdbcType=VARCHAR},
      LOANER_PHONE = #{loanerPhone,jdbcType=VARCHAR},    
      LOANER_ID = #{loanerId,jdbcType=VARCHAR},     
      DISPACH_USER_ID = #{dispachUserId,jdbcType=VARCHAR},
      DISPACH_TIME = #{dispachTime,jdbcType=TIMESTAMP},
      BANK_APPROVE_TIME = #{bankApproveTime,jdbcType=TIMESTAMP},
      LOANER_PROCESS_INSTCODE = #{loanerProcessInstCode,jdbcType=VARCHAR},
      BANK_LEVEL = #{bankLevel,jdbcType=VARCHAR},
      LOANER_ORG_CODE = #{loanerOrgCode,jdbcType=VARCHAR},
      LOANER_ORG_ID = #{loanerOrgId,jdbcType=VARCHAR},
      REMARK = #{remark,jdbcType=LONGVARCHAR},
      LAST_LOAN_BANK = #{lastLoanBank,jdbcType=VARCHAR},
      PRF_APPLY_DATE = #{prfApplyDate,jdbcType=TIMESTAMP},
      IF_REQUIRE_RECONSIDER = #{ifRequireReconsider,jdbcType=VARCHAR},
      IS_DELEGATE_YUCUI = #{isDelegateYucui,jdbcType=VARCHAR},
      IS_MAIN_LOAN_BANK = #{isMainLoanBank,jdbcType=VARCHAR},
      CUST_NAME = #{custName,jdbcType=VARCHAR},
      self_Del_Reason = #{selfDelReason,jdbcType=VARCHAR},
   	  rec_Letter_No = #{recLetterNo,jdbcType=VARCHAR},
   	  is_Tmp_Bank = #{isTmpBank,jdbcType=VARCHAR},
   	  TMP_BANK_UPDATE_TIME = #{tmpBankUpdateTime,jdbcType=TIMESTAMP},
   	  TMP_BANK_UPDATE_BY = #{tmpBankUpdateBy,jdbcType=VARCHAR},
   	  TMP_BANK_REASON=#{tmpBankReason,jdbcType=VARCHAR},
      TMP_BANK_STATUS=#{tmpBankStatus,jdbcType=VARCHAR},
      TMP_BANK_REJECT_REASON=#{tmpBankRejectReason,jdbcType=VARCHAR},
      LOANLOST_APPLY_REASON=#{loanLostApplyReason,jdbcType=VARCHAR},  
      LOANLOST_CONFIRM_CODE=#{loanLostConfirmCode,jdbcType=VARCHAR},
      LOAN_AGENT = #{loanAgent,jdbcType=VARCHAR},
      LOAN_AGENT_TEAM = #{loanAgentTeam,jdbcType=VARCHAR},
      IS_ACTIVE = #{isActive,jdbcType=CHAR},
      STATE_IN_BANK = #{stateInBank,jdbcType=VARCHAR},      
      UPDATE_TIME = GETDATE(),
      UPDATE_BY =@{SESSION_USER_ID}

    where PKID = #{pkid,jdbcType=BIGINT}  
  </update>
  <!-- 倒叙，取第一条 -->
  <select id="findToMortgageByCaseCodes" parameterType="java.lang.String" resultMap="ResultMapWithBLOBs" >
  	select * 
  		from sctrans.T_TO_MORTGAGE 
	where 
		case_code=#{caseCode,jdbcType=VARCHAR}  
		and IS_ACTIVE='1' 
  	ORDER BY 	
  		UPDATE_TIME DESC
  </select>
  
  <select id="findToMortgageSave" resultType="java.lang.String">
  	select 
  		SELF_MORT
	from 
		sctrans.T_TO_MORTGAGE_TOSAVE
   	where 
		CASE_CODE=#{caseCode,jdbcType=VARCHAR} 
		and IS_ACTIVE='1'  
  </select>
</mapper>